
var timer=null;var offset=5000;var index=-1;function slideImage(i){var id='image_'+target[i];$('#'+id).animate({opacity:1},100,function(){$(this).find('.imageItem').animate({alpha:'show'},'slow');}).show().siblings(':visible').find('.imageItem').animate({alpha:'hide'},'fast',function(){$(this).parent().animate({opacity:0},100).hide();});}
function hookThumb(){$('#thumbs li a').bind('click',function(){if(timer){clearTimeout(timer);}
var id=this.id;index=getIndex(id.substr(6));rechange(index);slideImage(index);this.blur();return false;});}
function hookBtn(){$('#thumbs ul li').filter('#play_prev,#play_next').bind('click',function(){if(timer){clearTimeout(timer);}
var id=this.id;if(id=='play_prev'){index--;if(index<0)index=target.length-1;}else{index++;if(index>target.length-1)index=0;}
rechange(index);slideImage(index);});}
function getIndex(v){for(var i=0;i<target.length;i++){if(target[i]==v)return i;}}
function rechange(loop){var id='thumb_'+target[loop];$('#thumbs li a.current').removeClass('current');$('#'+id).addClass('current');}
function auto(){index++;if(index>target.length-1){index=0;}
rechange(index);slideImage(index);timer=window.setTimeout(auto,offset);}
$(function(){$('div .imageItem').css({opacity:0.85});hookThumb();hookBtn();});!function($){"use strict";var Modal=function(element,options){this.init(element,options);};Modal.prototype={constructor:Modal,init:function(element,options){var that=this;this.options=options;this.$element=$(element).delegate('[data-dismiss="modal"]','click.dismiss.modal',$.proxy(this.hide,this));this.options.remote&&this.$element.find('.modal-body').load(this.options.remote,function(){var e=$.Event('loaded');that.$element.trigger(e);});var manager=typeof this.options.manager==='function'?this.options.manager.call(this):this.options.manager;manager=manager.appendModal?manager:$(manager).modalmanager().data('modalmanager');manager.appendModal(this);},toggle:function(){return this[!this.isShown?'show':'hide']();},show:function(){var e=$.Event('show');if(this.isShown)return;this.$element.trigger(e);if(e.isDefaultPrevented())return;this.escape();this.tab();this.options.loading&&this.loading();},hide:function(e){e&&e.preventDefault();e=$.Event('hide');this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return(this.isShown=false);this.isShown=false;this.escape();this.tab();this.isLoading&&this.loading();$(document).off('focusin.modal');this.$element.removeClass('in').removeClass('animated').removeClass(this.options.attentionAnimation).removeClass('modal-overflow').attr('aria-hidden',true);$.support.transition&&this.$element.hasClass('fade')?this.hideWithTransition():this.hideModal();},layout:function(){var prop=this.options.height?'height':'max-height',value=this.options.height||this.options.maxHeight;if(this.options.width){this.$element.css('width',this.options.width);var that=this;this.$element.css('margin-left',function(){if(/%/ig.test(that.options.width)){return-(parseInt(that.options.width)/2)+'%';}else{return-($(this).width()/2)+'px';}});}else{this.$element.css('width','');this.$element.css('margin-left','');}
this.$element.find('.modal-body').css('overflow','').css(prop,'');if(value){this.$element.find('.modal-body').css('overflow','auto').css(prop,value);}
var modalOverflow=$(window).height()-10<this.$element.height();if(modalOverflow||this.options.modalOverflow){this.$element.css('margin-top',0).addClass('modal-overflow');}else{this.$element.css('margin-top',0-this.$element.height()/2).removeClass('modal-overflow');}},tab:function(){var that=this;if(this.isShown&&this.options.consumeTab){this.$element.on('keydown.tabindex.modal','[data-tabindex]',function(e){if(e.keyCode&&e.keyCode==9){var $next=$(this),$rollover=$(this);that.$element.find('[data-tabindex]:enabled:not([readonly])').each(function(e){if(!e.shiftKey){$next=$next.data('tabindex')<$(this).data('tabindex')?$next=$(this):$rollover=$(this);}else{$next=$next.data('tabindex')>$(this).data('tabindex')?$next=$(this):$rollover=$(this);}});$next[0]!==$(this)[0]?$next.focus():$rollover.focus();e.preventDefault();}});}else if(!this.isShown){this.$element.off('keydown.tabindex.modal');}},escape:function(){var that=this;if(this.isShown&&this.options.keyboard){if(!this.$element.attr('tabindex'))this.$element.attr('tabindex',-1);this.$element.on('keyup.dismiss.modal',function(e){e.which==27&&that.hide();});}else if(!this.isShown){this.$element.off('keyup.dismiss.modal')}},hideWithTransition:function(){var that=this,timeout=setTimeout(function(){that.$element.off($.support.transition.end);that.hideModal();},500);this.$element.one($.support.transition.end,function(){clearTimeout(timeout);that.hideModal();});},hideModal:function(){var prop=this.options.height?'height':'max-height';var value=this.options.height||this.options.maxHeight;if(value){this.$element.find('.modal-body').css('overflow','').css(prop,'');}
this.$element.hide().trigger('hidden');},removeLoading:function(){this.$loading.remove();this.$loading=null;this.isLoading=false;},loading:function(callback){callback=callback||function(){};var animate=this.$element.hasClass('fade')?'fade':'';if(!this.isLoading){var doAnimate=$.support.transition&&animate;this.$loading=$('<div class="loading-mask '+animate+'">').append(this.options.spinner).appendTo(this.$element);if(doAnimate)this.$loading[0].offsetWidth;this.$loading.addClass('in');this.isLoading=true;doAnimate?this.$loading.one($.support.transition.end,callback):callback();}else if(this.isLoading&&this.$loading){this.$loading.removeClass('in');var that=this;$.support.transition&&this.$element.hasClass('fade')?this.$loading.one($.support.transition.end,function(){that.removeLoading()}):that.removeLoading();}else if(callback){callback(this.isLoading);}},focus:function(){var $focusElem=this.$element.find(this.options.focusOn);$focusElem=$focusElem.length?$focusElem:this.$element;$focusElem.focus();},attention:function(){if(this.options.attentionAnimation){this.$element.removeClass('animated').removeClass(this.options.attentionAnimation);var that=this;setTimeout(function(){that.$element.addClass('animated').addClass(that.options.attentionAnimation);},0);}
this.focus();},destroy:function(){var e=$.Event('destroy');this.$element.trigger(e);if(e.isDefaultPrevented())return;this.$element.off('.modal').removeData('modal').removeClass('in').attr('aria-hidden',true);if(this.$parent!==this.$element.parent()){this.$element.appendTo(this.$parent);}else if(!this.$parent.length){this.$element.remove();this.$element=null;}
this.$element.trigger('destroyed');}};$.fn.modal=function(option,args){return this.each(function(){var $this=$(this),data=$this.data('modal'),options=$.extend({},$.fn.modal.defaults,$this.data(),typeof option=='object'&&option);if(!data)$this.data('modal',(data=new Modal(this,options)));if(typeof option=='string')data[option].apply(data,[].concat(args));else if(options.show)data.show()})};$.fn.modal.defaults={keyboard:true,backdrop:true,loading:false,show:true,width:null,height:null,maxHeight:null,modalOverflow:false,consumeTab:true,focusOn:null,replace:false,resize:false,attentionAnimation:'shake',manager:'body',spinner:'<div class="loading-spinner" style="width:32px;margin-left:-16px;"><img src="data:image/gif;base64,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"></div></div>',backdropTemplate:'<div class="modal-backdrop" />'};$.fn.modal.Constructor=Modal;$(function(){$(document).off('click.modal').on('click.modal.data-api','[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr('href'),$target=$($this.attr('data-target')||(href&&href.replace(/.*(?=#[^\s]+$)/,''))),option=$target.data('modal')?'toggle':$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault();$target.modal(option).one('hide',function(){$this.focus();})});});}(window.jQuery);$(".modal").resize(function(){var modal_h=$(".modal").height();var windows_h=$(window).width();if(modal_h>=windows_h){$(this).addClass("modal-overflow modal-overflow2");return;}
else{$(this).removeClass("modal-overflow modal-overflow2");}});!function($){"use strict";var ModalManager=function(element,options){this.init(element,options);};ModalManager.prototype={constructor:ModalManager,init:function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.modalmanager.defaults,this.$element.data(),typeof options=='object'&&options);this.stack=[];this.backdropCount=0;if(this.options.resize){var resizeTimeout,that=this;$(window).on('resize.modal',function(){resizeTimeout&&clearTimeout(resizeTimeout);resizeTimeout=setTimeout(function(){for(var i=0;i<that.stack.length;i++){that.stack[i].isShown&&that.stack[i].layout();}},10);});}},createModal:function(element,options){$(element).modal($.extend({manager:this},options));},appendModal:function(modal){this.stack.push(modal);var that=this;modal.$element.on('show.modalmanager',targetIsSelf(function(e){var showModal=function(){modal.isShown=true;var transition=$.support.transition&&modal.$element.hasClass('fade');that.$element.toggleClass('modal-open',that.hasOpenModal()).toggleClass('page-overflow',$(window).height()<that.$element.height());modal.$parent=modal.$element.parent();modal.$container=that.createContainer(modal);modal.$element.appendTo(modal.$container);that.backdrop(modal,function(){modal.$element.show();if(transition){modal.$element[0].offsetWidth;}
modal.layout();modal.$element.addClass('in').attr('aria-hidden',false);var complete=function(){that.setFocus();modal.$element.trigger('shown');};transition?modal.$element.one($.support.transition.end,complete):complete();});};modal.options.replace?that.replace(showModal):showModal();}));modal.$element.on('hidden.modalmanager',targetIsSelf(function(e){that.backdrop(modal);if(!modal.$element.parent().length){that.destroyModal(modal);}else if(modal.$backdrop){var transition=$.support.transition&&modal.$element.hasClass('fade');if(transition){modal.$element[0].offsetWidth;}
$.support.transition&&modal.$element.hasClass('fade')?modal.$backdrop.one($.support.transition.end,function(){modal.destroy();}):modal.destroy();}else{modal.destroy();}}));modal.$element.on('destroyed.modalmanager',targetIsSelf(function(e){that.destroyModal(modal);}));},getOpenModals:function(){var openModals=[];for(var i=0;i<this.stack.length;i++){if(this.stack[i].isShown)openModals.push(this.stack[i]);}
return openModals;},hasOpenModal:function(){return this.getOpenModals().length>0;},setFocus:function(){var topModal;for(var i=0;i<this.stack.length;i++){if(this.stack[i].isShown)topModal=this.stack[i];}
if(!topModal)return;topModal.focus();},destroyModal:function(modal){modal.$element.off('.modalmanager');if(modal.$backdrop)this.removeBackdrop(modal);this.stack.splice(this.getIndexOfModal(modal),1);var hasOpenModal=this.hasOpenModal();this.$element.toggleClass('modal-open',hasOpenModal);if(!hasOpenModal){this.$element.removeClass('page-overflow');}
this.removeContainer(modal);this.setFocus();},getModalAt:function(index){return this.stack[index];},getIndexOfModal:function(modal){for(var i=0;i<this.stack.length;i++){if(modal===this.stack[i])return i;}},replace:function(callback){var topModal;for(var i=0;i<this.stack.length;i++){if(this.stack[i].isShown)topModal=this.stack[i];}
if(topModal){this.$backdropHandle=topModal.$backdrop;topModal.$backdrop=null;callback&&topModal.$element.one('hidden',targetIsSelf($.proxy(callback,this)));topModal.hide();}else if(callback){callback();}},removeBackdrop:function(modal){modal.$backdrop.remove();modal.$backdrop=null;},createBackdrop:function(animate,tmpl){var $backdrop;if(!this.$backdropHandle){$backdrop=$(tmpl).addClass(animate).appendTo(this.$element);}else{$backdrop=this.$backdropHandle;$backdrop.off('.modalmanager');this.$backdropHandle=null;this.isLoading&&this.removeSpinner();}
return $backdrop;},removeContainer:function(modal){modal.$container.remove();modal.$container=null;},createContainer:function(modal){var $container;$container=$('<div class="modal-scrollable">').css('z-index',getzIndex('modal',this.getOpenModals().length)).appendTo(this.$element);if(modal&&modal.options.backdrop!='static'){$container.on('click.modal',targetIsSelf(function(e){modal.hide();}));}else if(modal){$container.on('click.modal',targetIsSelf(function(e){modal.attention();}));}
return $container;},backdrop:function(modal,callback){var animate=modal.$element.hasClass('fade')?'fade':'',showBackdrop=modal.options.backdrop&&this.backdropCount<this.options.backdropLimit;if(modal.isShown&&showBackdrop){var doAnimate=$.support.transition&&animate&&!this.$backdropHandle;modal.$backdrop=this.createBackdrop(animate,modal.options.backdropTemplate);modal.$backdrop.css('z-index',getzIndex('backdrop',this.getOpenModals().length));if(doAnimate)modal.$backdrop[0].offsetWidth;modal.$backdrop.addClass('in');this.backdropCount+=1;doAnimate?modal.$backdrop.one($.support.transition.end,callback):callback();}else if(!modal.isShown&&modal.$backdrop){modal.$backdrop.removeClass('in');this.backdropCount-=1;var that=this;$.support.transition&&modal.$element.hasClass('fade')?modal.$backdrop.one($.support.transition.end,function(){that.removeBackdrop(modal)}):that.removeBackdrop(modal);}else if(callback){callback();}},removeSpinner:function(){this.$spinner&&this.$spinner.remove();this.$spinner=null;this.isLoading=false;},removeLoading:function(){this.$backdropHandle&&this.$backdropHandle.remove();this.$backdropHandle=null;this.removeSpinner();},loading:function(callback){callback=callback||function(){};this.$element.toggleClass('modal-open',!this.isLoading||this.hasOpenModal()).toggleClass('page-overflow',$(window).height()<this.$element.height());if(!this.isLoading){this.$backdropHandle=this.createBackdrop('fade',this.options.backdropTemplate);this.$backdropHandle[0].offsetWidth;var openModals=this.getOpenModals();this.$backdropHandle.css('z-index',getzIndex('backdrop',openModals.length+1)).addClass('in');var $spinner=$(this.options.spinner).css('z-index',getzIndex('modal',openModals.length+1)).appendTo(this.$element).addClass('in');this.$spinner=$(this.createContainer()).append($spinner).on('click.modalmanager',$.proxy(this.loading,this));this.isLoading=true;$.support.transition?this.$backdropHandle.one($.support.transition.end,callback):callback();}else if(this.isLoading&&this.$backdropHandle){this.$backdropHandle.removeClass('in');var that=this;$.support.transition?this.$backdropHandle.one($.support.transition.end,function(){that.removeLoading()}):that.removeLoading();}else if(callback){callback(this.isLoading);}}};var getzIndex=(function(){var zIndexFactor,baseIndex={};return function(type,pos){if(typeof zIndexFactor==='undefined'){var $baseModal=$('<div class="modal hide" />').appendTo('body'),$baseBackdrop=$('<div class="modal-backdrop hide" />').appendTo('body');baseIndex['modal']=+$baseModal.css('z-index');baseIndex['backdrop']=+$baseBackdrop.css('z-index');zIndexFactor=baseIndex['modal']-baseIndex['backdrop'];$baseModal.remove();$baseBackdrop.remove();$baseBackdrop=$baseModal=null;}
return baseIndex[type]+(zIndexFactor*pos);}}());function targetIsSelf(callback){return function(e){if(this===e.target){return callback.apply(this,arguments);}}}
$.fn.modalmanager=function(option,args){return this.each(function(){var $this=$(this),data=$this.data('modalmanager');if(!data)$this.data('modalmanager',(data=new ModalManager(this,option)));if(typeof option==='string')data[option].apply(data,[].concat(args))})};$.fn.modalmanager.defaults={backdropLimit:999,resize:true,spinner:'<div class="loading-spinner fade" style="width:32px;margin-left:-16px; "><img src="data:image/gif;base64,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"></div></div>',backdropTemplate:'<div class="modal-backdrop" />'};$.fn.modalmanager.Constructor=ModalManager
$(function(){$(document).off('show.bs.modal').off('hidden.bs.modal');});}(jQuery);;!function(){"use strict";var f,b={open:"{{",close:"}}"},c={exp:function(a){return new RegExp(a,"g")},query:function(a,c,e){var f=["#([\\s\\S])+?","([^{#}])*?"][a||0];return d((c||"")+b.open+f+b.close+(e||""))},escape:function(a){return String(a||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},error:function(a,b){var c="Laytpl Error：";return"object"==typeof console&&console.error(c+a+"\n"+(b||"")),c+a}},d=c.exp,e=function(a){this.tpl=a};e.pt=e.prototype,e.pt.parse=function(a,e){var f=this,g=a,h=d("^"+b.open+"#",""),i=d(b.close+"$","");a=a.replace(/[\r\t\n]/g," ").replace(d(b.open+"#"),b.open+"# ").replace(d(b.close+"}"),"} "+b.close).replace(/\\/g,"\\\\").replace(/(?="|')/g,"\\").replace(c.query(),function(a){return a=a.replace(h,"").replace(i,""),'";'+a.replace(/\\/g,"")+'; view+="'}).replace(c.query(1),function(a){var c='"+(';return a.replace(/\s/g,"")===b.open+b.close?"":(a=a.replace(d(b.open+"|"+b.close),""),/^=/.test(a)&&(a=a.replace(/^=/,""),c='"+_escape_('),c+a.replace(/\\/g,"")+')+"')}),a='"use strict";var view = "'+a+'";return view;';try{return f.cache=a=new Function("d, _escape_",a),a(e,c.escape)}catch(j){return delete f.cache,c.error(j,g)}},e.pt.render=function(a,b){var e,d=this;return a?(e=d.cache?d.cache(a,c.escape):d.parse(d.tpl,a),b?(b(e),void 0):e):c.error("no data")},f=function(a){return"string"!=typeof a?c.error("Template not found"):new e(a)},f.config=function(a){a=a||{};for(var c in a)b[c]=a[c]},f.v="1.1","function"==typeof define?define(function(){return f}):"undefined"!=typeof exports?module.exports=f:window.laytpl=f}();var _dayLength=24*60*60*1000;var _hourLength=60*60*1000;var _minLength=60*1000;var _functionObj=new Array();var __sto=setInterval;window.setInterval=function(callback,timeout,param){var args=Array.prototype.slice.call(arguments,2);var _cb=function(){callback.apply(null,args);}
__sto(_cb,timeout);}
$(document).ready(function(){$("span.time").each(function(){if($(this).attr("value")){var timevalue=$(this).attr("value");var idvalue=$(this).attr("id");var spanTimeObj={id:idvalue,time:timevalue,disable:false};_functionObj.push(spanTimeObj);}});_OneSecondEvent();});function _OneSecondEvent(){for(var i=0;i<_functionObj.length;i++){if(!_functionObj[i].disable){var diffTime=_functionObj[i].time-_serverTime;$("span[id='"+_functionObj[i].id+"']").html(setTimeString(_functionObj[i].time));if((diffTime)<1000*60*60&&(diffTime)>(1000*60*59+1000*58)){try{_TimeOutEvent($("span[id='"+_functionObj[i].id+"']"));_functionObj[i].disable=true;}catch(ex){}}
if((diffTime)<(60*1000)){try{_OneMinuteEvent(diffTime);}catch(ex){}}
if((diffTime)<0){try{_TimeOutEvent($("span[id='"+_functionObj[i].id+"']"));_functionObj[i].disable=true;}catch(ex){}}}}}
function resetTime(spanId){for(var i=0;i<_functionObj.length;i++){if(_functionObj[i].id=="span_"+spanId){_functionObj[i].time=$("#span_"+spanId).attr("value");_functionObj[i].disable=false;}}}
function setTimeString(timevalue){var days=(timevalue-_serverTime)/_dayLength;var hours=((timevalue-_serverTime)%_dayLength)/_hourLength;var min=(((timevalue-_serverTime)%_dayLength)%_hourLength)/_minLength;var sec=(((timevalue-_serverTime)%_dayLength)%_hourLength)%_minLength/1000;if(days>1)
return buildTimeStr(days)+"<em>天</em>"+buildTimeStr(hours)+"<em>时</em>"+buildTimeStr(min)+"<em>分</em>"+buildTimeStr(sec)+"<em>秒</em>";else if(hours>1)
return buildTimeStr(hours)+"<em>时</em>"+buildTimeStr(min)+"<em>分</em>"+buildTimeStr(sec)+"<em>秒</em>";else if(min>1)
return buildTimeStr(min)+"<em>分</em>"+buildTimeStr(sec)+"<em>秒</em>";else if(sec>0)
return buildTimeStr(sec)+"<em>秒</em>";}
function buildTimeStr(value){value=Math.floor(value*1.0);if(value>9){return"<var>"+value+"</var>";}else{return"<var>0"+value+"</var>";}}
function submitValue(name,value){var inputObj=$("input[name='"+name+"']");if(inputObj){inputObj.val(value);}
document.forms[0].submit();}
$(document).ready(function(){if($("#resourceStatus").val()==1||$("#resourceStatus").val()==10){var timer_interval=setInterval(beginAcceptOffer,2000);}
$(window).on("scroll",$backToTopFun);$backToTopFun();$.Huitab("#resourceDescTab .tabBar span","#resourceDescTab .tabCon","current","click","0");try{$('#showInfodialog').modal({keyboard:false,backdrop:true,width:875});}catch(ex){}
applyCountPriceOver();});function beginAcceptOffer(){var resourceId=$("#resourceId").val();$.ajax({type:"POST",url:"./getoffer_ajax.f",data:{id:$("#resourceId").val(),time:$("#maxOfferTime").val()},cache:false,dataType:'json',success:function(result){if(result.result=="refresh"){window.location.reload();}else if(result!=null){$("#maxOfferTime").val(result.time);acceptNewOffer(result);applyCountPriceOver();}},error:function(XMLHttpRequest,textStatus,errorThrown){if(XMLHttpRequest.status!=0){$('#myModalError').modal({keyboard:false,backdrop:true});}},complete:function(XMLHttpRequest,status){if(status=='timeout'){}else if(status=='error'){}}});}
function acceptNewOffer(resultObj){if(resultObj.result){var maxOffer;if(resultObj.result.length>0){var maxOfferCount=parseInt(resultObj.result[0].offerCount)-1;$("span.label-max").each(function(){$(this).removeClass("label-danger");$(this).removeClass("label-max");$(this).removeClass("label");$(this).html("第"+maxOfferCount+"轮");});}
if($(".table-price tbody tr").length>14){for(var i=0;i<resultObj.result.length;i++){$(".table-price tbody tr:last-child").remove();}}
var gettpl0=document.getElementById('tpl_offer0').innerHTML;var gettpl1=document.getElementById('tpl_offer1').innerHTML;var cuserId=$("#aUser").attr("value");for(var i=resultObj.result.length-1;i>-1;i--){resultObj.result[i].cUser=cuserId;if(i==0){maxOffer=resultObj.result[0];laytpl(gettpl0).render(resultObj.result[i],function(html){$(".table-price tbody").prepend(html);});}else{laytpl(gettpl1).render(resultObj.result[i],function(html){$(".table-price tbody").prepend(html);});}}
if(maxOffer){$("#maxOffer").val(maxOffer.offerPrice*1);var newOffer=parseFloat((maxOffer.offerPrice*1+$("#addOffer").val()*1).toFixed(4));var topOffer=parseFloat($("#topOffer").val()*1);if(topOffer>0&&(maxOffer.offerType==0||maxOffer.offerType==1)&&(maxOffer.offerPrice*1==topOffer||newOffer>topOffer)){window.location.reload();}
$("#txtoffer").val(newOffer);if(maxOffer.offerType==2){$("#priceHouseInfo").html(maxOffer.offerPrice);}else{$("#priceInfo").html(maxOffer.offerPrice);}
if("1"==$("#resourceStatus").val()){$("#span_"+$("#resourceId").val()).attr("value",maxOffer.offerTime*1+1000*60*4);resetTime($("#resourceId").val());hideOneMinuteInfoBar();}}}}
function getAcceptOffer(){var maxOffer=$("#maxOffer").val();if(maxOffer==0){return $("#beginOffer").val()*1;}else{return maxOffer*1+$("#addOffer").val()*1;}}
function beginOffer(){var htmlObj={};htmlObj.offer=$("#txtoffer").val();if(!htmlObj.offer.match(/^(:?(:?\d+.\d+)|(:?\d+))$/)){showError(false,"报价不是数字，请重新输入！");return false;}
var acceptOffer=getAcceptOffer();acceptOffer=acceptOffer.toFixed(4);if(htmlObj.offer*1.0<acceptOffer*1.0){showError(false,"报价必须高于最高价，增价幅度必须是"+$("#addOffer").val()+"的整数倍！");return false;}
var addValue=(htmlObj.offer*1.0-acceptOffer*1.0)/($("#addOffer").val()*1.0);addValue=parseFloat(addValue.toFixed(4));if(!IsNum(addValue+"")){showError(false,"报价增价幅度必须是"+$("#addOffer").val()+"的整数倍！");return false;}
if(!topOffer()){htmlObj.offerChinese=Chinese(htmlObj.offer*10000);laytpl(document.getElementById('tpl_beginoffer').innerHTML).render(htmlObj,function(html){$("#modal_content").html(html);});}else{htmlObj.housePrice=htmlObj.offer;htmlObj.offer=$("#maxOfferPrice").val();htmlObj.offerChinese=Chinese(htmlObj.offer*10000);laytpl(document.getElementById('tpl_beginoffer_top').innerHTML).render(htmlObj,function(html){$("#modal_content").html(html);});}
$('#myModal').modal({backdrop:false});}
function postOffer(){var resourceId=$("#resourceId").val();var offerType=0;if($("#maxOfferType")&&$("#maxOfferType").val()){offerType=$("#maxOfferType").val();}
var params={id:$("#resourceId").val(),offer:$("#txtoffer").val(),type:offerType};var caEnabled=$('#caEnabled').val();if(caEnabled!=null&&caEnabled=='true'){var signResult=gtmapCA.signContent(JSON.stringify(params),1);if(signResult!=true){alert(gtmapCA.getErrorString(signResult));return;}
params.sxinput=gtmapCA.getSxInput();params.pkcs1=gtmapCA.getSxSignature();params.sxcertificate=gtmapCA.getSxCertificate();params.sxaction="PKCS1";params.sxdigest="MD5";}
$.ajax({type:"POST",url:"./offer.f",data:params,cache:false,success:function(data){if("true"==data){showError(true,"接受报价成功！");}else{showError(false,data);}},complete:function(XMLHttpRequest,status){if(status=='timeout'){showError(false,"接受报价超时！");}else if(status=='error'){showError(false,"接受报价错误！");}}});}
function topOffer(){if($("#maxOfferType")&&$("#maxOfferType").val()=="2"){return true;}
return false;}
function showError(infoType,info){$('#myModal').modal('hide');var html="";if(infoType){html=('<div class="Huialert Huialert-success info-style" ><i class="icon-remove"></i>'+info+'</div>');}else{html=('<div class="Huialert Huialert-danger info-style"  ><i class="icon-remove"></i>'+info+'</div>');}
$("#showinfo").html(html);$("#showinfo").fadeIn(2000,function(){setTimeout(function(){$("#showinfo").fadeOut(2000);},5000);});}
function _TimeOutEvent(spanObj){$("#refreshValue").html("数据处理中，请稍后...");$('#myModalRefresh').modal({keyboard:false,backdrop:true});setTimeout("redirect()",1000);}
function _OneMinuteEvent(value){if(value>0){showOneMinuteInfoBar()
$(".progress-bar").attr("style","width:"+Math.round(value*100/60000)+"%;");}else{hideOneMinuteInfoBar();}}
function hideOneMinuteInfoBar(){$("#oneminuteInfo").css('display','none');$("#oneminuteProgress").css('display','none');}
function showOneMinuteInfoBar(){$("#oneminuteInfo").css('display','block');$("#oneminuteProgress").css('display','block');}
function redirect(){var value=$("#refreshValue").text()*1;value=value-1;if(value>1){$("#refreshValue").html("数据处理中，请稍后...");setTimeout("redirect()",1000);}else{window.location.reload();}}
function addOffer(){var value=$("#txtoffer").val()*1+$("#addOffer").val()*1;value=parseFloat(value.toFixed(5));var topOffer=$("#topOffer").val()*1;if(topOffer>0&&value>topOffer){showError(false,"已达最高限价！");return;}
$("#txtoffer").val(value);}
function cutOffer(){var acceptOffer=getAcceptOffer();if(($("#txtoffer").val()*1-$("#addOffer").val()*1)>=acceptOffer*1){var value=$("#txtoffer").val()*1-$("#addOffer").val()*1;value=parseFloat(value.toFixed(5));$("#txtoffer").val(value);}}
function confirmLimit(resourceId){$.ajax({type:"POST",url:"./offerLimit.f",data:{id:$("#resourceId").val()},cache:false,success:function(data){window.location.reload();},complete:function(XMLHttpRequest,status){window.location.reload();}});}
function Chinese(num){if(!/^\d*(\.\d*)?$/.test(num)){return false;}
num=num.toFixed(5)*1;var AA=new Array("零","壹","贰","叁","肆","伍","陆","柒","捌","玖");var BB=new Array("","拾","佰","仟","万","亿","点","");var a=(""+num).replace(/(^0*)/g,"").split("."),k=0,re="";for(var i=a[0].length-1;i>=0;i--){switch(k){case 0:re=BB[7]+re;break;case 4:if(!new RegExp("0{4}\\d{"+(a[0].length-i-1)+"}$").test(a[0]))
re=BB[4]+re;break;case 8:re=BB[5]+re;BB[7]=BB[5];k=0;break;}
if(k%4==2&&a[0].charAt(i)=="0"&&a[0].charAt(i+2)!="0")re=AA[0]+re;if(a[0].charAt(i)!=0)re=AA[a[0].charAt(i)]+BB[k%4]+re;k++;}
if(a.length>1){re+=BB[6];for(var i=0;i<a[1].length;i++)re+=AA[a[1].charAt(i)];}
return re;}
function IsNum(s){if(s!=null){var r,re;re=/\d*/i;r=s.match(re);return(r==s)?true:false;}
return false;}
function showToolTip(){$('#priceInfo').mouseover(function(){var pos=$(this).offset();var pos_x=eval(pos.left);var pos_y=eval(pos.top)+30;pos_x=pos_x.toString();pos_x=pos_x+'px';pos_y=pos_y+'px';var tooltipobj={};tooltipobj.over=Math.round(($('#priceInfo').html()*1.0-$("#offer0").val()*1.0)*100/$("#offer0").val()*1.0);tooltipobj.price1=Math.round($('#priceInfo').html()*10000/$("#crArea").val()*1.0);tooltipobj.price2=Math.round(tooltipobj.price1*666.67/10000);laytpl(document.getElementById('tpl_tooltip').innerHTML).render(tooltipobj,function(html){$('body').append(html);$('.tooltip').css("top",pos_y);$('.tooltip').css("left",pos_x);});}).mouseout(function(){$('.tooltip').remove();});}
function applyCountPriceOver(){var tooltipobj={};tooltipobj.over=Math.round(($('#priceInfo').html()*1.0-$("#offer0").val()*1.0)*100/$("#offer0").val()*1.0);tooltipobj.price=Math.round($('#priceInfo').html()*10000/$("#crArea").val()*1.0);var maxRjl=$("#maxRjl").val();if(maxRjl!=0&&maxRjl!=""){tooltipobj.buildingPrice=Math.round(tooltipobj.price/maxRjl);$('#buildingPrice').html(tooltipobj.buildingPrice);}
$('#applyNumberOver').html(tooltipobj.over);$('#applyNumberPrice').html(tooltipobj.price);}